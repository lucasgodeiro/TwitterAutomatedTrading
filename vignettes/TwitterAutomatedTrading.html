<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>TwitterAutomatedTrading Package</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">TwitterAutomatedTrading Package</h1>
<h4 class="author">Lucas Godeiro</h4>
<address class="author_afil">
Department of Applied Social Sciences, Federal Rural University of the Semi-arid Region – UFERSA, Brazil.<br><a class="author_email" href="mailto:#"><a href="mailto:lucasgodeiro@ufersa.edu.br" class="email">lucasgodeiro@ufersa.edu.br</a></a>
</address>



<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">library</span>(TwitterAutomatedTrading)</a></code></pre></div>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>The main goal of this package is to build a trade system using unstructured data from twitter and stocktwits. The package also provides as output a txt file where the user can integrate it with Metatrader 5 or another trading platform in order to execute the orders.</p>
</div>
<div id="how-to-use" class="section level1">
<h1>How to use</h1>
<p>In order to use the packate and doing its integration with metatrader, the user should dowload the EA News Advisor, in the file ‘News_Advisor.ex5’ in the EA folder, and install the EA in the Metatrader 5. Then, the user should create a folder with the name ‘Common’ in the folder Metaquotes, inside AppData. For example, in my computer the path is: “C:/Users/Cliente/AppData/Roaming/MetaQuotes/Terminal”.</p>
<p>For example, the get_sentiment_tweets computes the sentiment from the tweets(remind to connect R and twitter using your API Key from twitter):</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">ntweets &lt;-<span class="st"> </span><span class="dv">500</span></a>
<a class="sourceLine" id="cb2-2" title="2">time_tweet &lt;-<span class="st"> </span><span class="dv">6</span></a>
<a class="sourceLine" id="cb2-3" title="3">terms_list &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;IBOVESPA OR bovespa OR ibov OR petroleo OR $SPX OR $SPY OR $EWZ&quot;</span>)</a>
<a class="sourceLine" id="cb2-4" title="4">time_zone &lt;-<span class="st"> &quot;Brazil/East&quot;</span></a>
<a class="sourceLine" id="cb2-5" title="5">positive_dictionary &lt;-<span class="st"> </span>my_dictionary[[<span class="st">&#39;positive_terms&#39;</span>]]</a>
<a class="sourceLine" id="cb2-6" title="6">negative_dictionary &lt;-<span class="st"> </span>my_dictionary[[<span class="st">&#39;negative_terms&#39;</span>]]</a>
<a class="sourceLine" id="cb2-7" title="7">sentiment_index &lt;-<span class="st"> </span><span class="kw">get_sentiment_tweets</span>(<span class="dt">ntweets =</span> ntweets,</a>
<a class="sourceLine" id="cb2-8" title="8"><span class="dt">terms_list =</span> terms_list,</a>
<a class="sourceLine" id="cb2-9" title="9"><span class="dt">time_tweet =</span> time_tweet,</a>
<a class="sourceLine" id="cb2-10" title="10"><span class="dt">time_zone =</span> time_zone,</a>
<a class="sourceLine" id="cb2-11" title="11"><span class="dt">positive_dictionary =</span> positive_dictionary,</a>
<a class="sourceLine" id="cb2-12" title="12"><span class="dt">negative_dictionary =</span> negative_dictionary</a>
<a class="sourceLine" id="cb2-13" title="13">)</a>
<a class="sourceLine" id="cb2-14" title="14"></a>
<a class="sourceLine" id="cb2-15" title="15">sent_idx &lt;-<span class="st"> </span>sentiment_index[[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb2-16" title="16">sent_wrd &lt;-<span class="st"> </span>sentiment_index[[<span class="dv">2</span>]]</a>
<a class="sourceLine" id="cb2-17" title="17">sent_pos &lt;-<span class="st"> </span>sentiment_index[[<span class="dv">3</span>]]</a>
<a class="sourceLine" id="cb2-18" title="18">sent_neg &lt;-<span class="st"> </span>sentiment_index[[<span class="dv">4</span>]]</a></code></pre></div>
<p>Where the sentiment index <span class="math inline">\(S_{t}\)</span> is defined by:</p>
<p><span class="math display">\[
S_{t} = \frac{X_{t}^{pos} - X_{t}^{neg} }{1 + (X_{t}^{pos} + X_{t}^{neg})}
\]</span></p>
<p><span class="math inline">\(X_{t}^{pos}\)</span> and <span class="math inline">\(X_{t}^{neg}\)</span> is the word frequency of positive and negative words. The indexes that uses only positive or negative information in the denominatar are defined as:</p>
<p><span class="math display">\[
S_{t}^{pos} = \frac{X_{t}^{pos}  }{1 + (X_{t}^{pos} + X_{t}^{neg})}
\]</span></p>
<p><span class="math display">\[
S_{t}^{neg} = \frac{X_{t}^{neg}  }{1 + (X_{t}^{pos} + X_{t}^{neg})}
\]</span></p>
<p>The main function of the package is the Start_Trading function. In this function for example the user can define the operation hours, whether the operation is day trade or swing trade, wheter follow or not the sentiment index, among other options. You can check the function documentation. The the example shows how to use the function(remind to put your consumer key and access token from twitter API):</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">Signal_File_Name &lt;-<span class="st"> &#39;Signal.txt&#39;</span></a>
<a class="sourceLine" id="cb3-2" title="2">ntweets &lt;-<span class="st"> </span><span class="dv">5000</span></a>
<a class="sourceLine" id="cb3-3" title="3">time_tweet &lt;-<span class="st"> </span><span class="dv">6</span></a>
<a class="sourceLine" id="cb3-4" title="4">terms_list &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;IBOVESPA OR bovespa OR ibov OR petroleo OR $SPX OR $SPY OR $EWZ&quot;</span>)</a>
<a class="sourceLine" id="cb3-5" title="5">time_zone &lt;-<span class="st"> &quot;Brazil/East&quot;</span></a>
<a class="sourceLine" id="cb3-6" title="6">positive_dictionary &lt;-<span class="st"> </span>my_dictionary[[<span class="st">&#39;positive_terms&#39;</span>]]</a>
<a class="sourceLine" id="cb3-7" title="7">negative_dictionary &lt;-<span class="st"> </span>my_dictionary[[<span class="st">&#39;negative_terms&#39;</span>]]</a>
<a class="sourceLine" id="cb3-8" title="8"></a>
<a class="sourceLine" id="cb3-9" title="9">path_twits &lt;-<span class="st"> </span><span class="kw">tempdir</span>()</a>
<a class="sourceLine" id="cb3-10" title="10">stock_symbol &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;EWZ&quot;</span>, <span class="st">&quot;SPX&quot;</span>, <span class="st">&quot;SPY&quot;</span>, <span class="st">&quot;USO&quot;</span>)</a>
<a class="sourceLine" id="cb3-11" title="11">time_zone &lt;-<span class="st"> &quot;Brazil/East&quot;</span></a>
<a class="sourceLine" id="cb3-12" title="12"></a>
<a class="sourceLine" id="cb3-13" title="13">consumer_key &lt;-<span class="st"> &quot;your consumer_key&quot;</span></a>
<a class="sourceLine" id="cb3-14" title="14">consumer_secret &lt;-<span class="st"> &quot;your consumer_secret&quot;</span></a>
<a class="sourceLine" id="cb3-15" title="15">access_token &lt;-<span class="st"> &quot;your access token&quot;</span></a>
<a class="sourceLine" id="cb3-16" title="16">access_secret &lt;-<span class="st"> &quot; your access secret &quot;</span></a>
<a class="sourceLine" id="cb3-17" title="17">nap_time_error &lt;-<span class="st"> </span><span class="fl">7.7</span></a>
<a class="sourceLine" id="cb3-18" title="18">path_decision &lt;-<span class="st"> </span><span class="kw">tempdir</span>()</a>
<a class="sourceLine" id="cb3-19" title="19">path_twits &lt;-<span class="st"> &#39;your path&#39;</span></a>
<a class="sourceLine" id="cb3-20" title="20">initial_time &lt;-<span class="st"> </span><span class="dv">9</span></a>
<a class="sourceLine" id="cb3-21" title="21">final_time &lt;-<span class="st"> </span><span class="dv">17</span></a>
<a class="sourceLine" id="cb3-22" title="22">freq_trade &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb3-23" title="23">Day_Trade &lt;-<span class="st"> </span><span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb3-24" title="24">Operation_Hours1 &lt;-<span class="st"> </span><span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb3-25" title="25">start_time1 &lt;-<span class="st"> </span><span class="dv">9</span></a>
<a class="sourceLine" id="cb3-26" title="26">end_time1 &lt;-<span class="st"> </span><span class="dv">17</span></a>
<a class="sourceLine" id="cb3-27" title="27">w_twitter &lt;-<span class="st"> </span><span class="fl">0.9</span></a>
<a class="sourceLine" id="cb3-28" title="28">w_stocktwits &lt;-<span class="st"> </span><span class="fl">0.1</span></a>
<a class="sourceLine" id="cb3-29" title="29">Sentiment_Index_Threshold &lt;-<span class="st"> </span><span class="fl">0.5</span></a>
<a class="sourceLine" id="cb3-30" title="30"></a>
<a class="sourceLine" id="cb3-31" title="31"></a>
<a class="sourceLine" id="cb3-32" title="32"><span class="kw">Start_Trading</span>(<span class="dt">consumer_key =</span> consumer_key,</a>
<a class="sourceLine" id="cb3-33" title="33">             <span class="dt">consumer_secret =</span> consumer_secret,</a>
<a class="sourceLine" id="cb3-34" title="34">             <span class="dt">access_token =</span> access_token,</a>
<a class="sourceLine" id="cb3-35" title="35">             <span class="dt">access_secret =</span> access_secret,</a>
<a class="sourceLine" id="cb3-36" title="36">             <span class="dt">path_decision =</span> path_decision,</a>
<a class="sourceLine" id="cb3-37" title="37">             <span class="dt">ntweets =</span> ntweets,</a>
<a class="sourceLine" id="cb3-38" title="38">             <span class="dt">terms_list =</span> terms_list,</a>
<a class="sourceLine" id="cb3-39" title="39">             <span class="dt">time_tweet =</span> time_tweet,</a>
<a class="sourceLine" id="cb3-40" title="40">             <span class="dt">time_zone =</span> time_zone,</a>
<a class="sourceLine" id="cb3-41" title="41">             <span class="dt">positive_dictionary =</span> positive_dictionary,</a>
<a class="sourceLine" id="cb3-42" title="42">             <span class="dt">negative_dictionary =</span> negative_dictionary,</a>
<a class="sourceLine" id="cb3-43" title="43">             <span class="dt">stock_symbol =</span> stock_symbol,</a>
<a class="sourceLine" id="cb3-44" title="44">             <span class="dt">path_twits =</span> path_twits,</a>
<a class="sourceLine" id="cb3-45" title="45">             <span class="dt">Operation_Hours1 =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb3-46" title="46">             <span class="dt">Operation_Hours2 =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb3-47" title="47">             <span class="dt">Operation_Hours3 =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb3-48" title="48">             <span class="dt">start_time1 =</span> start_time1,</a>
<a class="sourceLine" id="cb3-49" title="49">             <span class="dt">start_time2 =</span> start_time1,</a>
<a class="sourceLine" id="cb3-50" title="50">             <span class="dt">start_time3 =</span> start_time1,</a>
<a class="sourceLine" id="cb3-51" title="51">             <span class="dt">end_time1 =</span> end_time1,</a>
<a class="sourceLine" id="cb3-52" title="52">             <span class="dt">end_time2 =</span> end_time1,</a>
<a class="sourceLine" id="cb3-53" title="53">             <span class="dt">end_time3 =</span> end_time1,</a>
<a class="sourceLine" id="cb3-54" title="54">             <span class="dt">Day_Trade =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb3-55" title="55">             <span class="dt">nap_time_error =</span> nap_time_error,</a>
<a class="sourceLine" id="cb3-56" title="56">             <span class="dt">initial_time =</span> initial_time,</a>
<a class="sourceLine" id="cb3-57" title="57">             <span class="dt">final_time =</span> final_time,</a>
<a class="sourceLine" id="cb3-58" title="58">             <span class="dt">freq_trade =</span> freq_trade,</a>
<a class="sourceLine" id="cb3-59" title="59">             <span class="dt">w_twitter =</span> w_twitter,</a>
<a class="sourceLine" id="cb3-60" title="60">             <span class="dt">w_stocktwits =</span> w_stocktwits,</a>
<a class="sourceLine" id="cb3-61" title="61">             <span class="dt">Sentiment_Index_Threshold =</span> Sentiment_Index_Threshold,</a>
<a class="sourceLine" id="cb3-62" title="62">             <span class="dt">Use_Delta_Sentiment =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb3-63" title="63">             <span class="dt">Signal_File_Name =</span> Signal_File_Name</a>
<a class="sourceLine" id="cb3-64" title="64">             )</a></code></pre></div>
</div>
<div id="final-remarks" class="section level1">
<h1>Final Remarks</h1>
<p>I hope that this package helps traders and users which are interested in quantitave trading using unstructed data. The main objective is to aumotatize the tradings and link R and Metatrader 5.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
